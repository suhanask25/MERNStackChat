# Women's Health Tracking Platform

## Overview

This is a web-based women's health tracking platform that uses AI-powered medical report analysis to help users monitor health conditions like PCOS, PCOD, thyroid disorders, and other hormonal imbalances. The application allows users to upload medical reports (PDF/images), complete symptom assessments, and receive personalized health insights, risk scores, and daily wellness tasks generated by Google Gemini AI.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture

**Framework**: React with TypeScript using Vite as the build tool

**UI Component System**: 
- Shadcn/ui components built on Radix UI primitives
- Tailwind CSS for styling with a custom healthcare-focused design system
- Material Design principles adapted for healthcare applications
- Component library located in `client/src/components/ui/`

**Design Philosophy**:
- Healthcare-focused interface emphasizing trust, clarity, and accessibility
- Uses Inter font for medical-grade legibility
- Calming color scheme with neutral base colors
- Progressive disclosure pattern (show essential info first, details on demand)
- Responsive layout supporting mobile and desktop viewports

**Routing**: Wouter for client-side routing with the following main routes:
- `/` - Dashboard (risk scores, daily tasks, insights)
- `/upload` - Medical report upload interface
- `/assessment` - Symptom assessment questionnaire
- `/history` - Historical medical reports
- `/tracking` - Parameter tracking with visualization charts

**State Management**: 
- TanStack Query (React Query) for server state management
- Local React state for UI interactions
- Custom hooks for mobile detection and toast notifications

**Data Visualization**: Recharts library for rendering health parameter trends and tracking charts

### Backend Architecture

**Runtime**: Node.js with Express.js framework

**API Structure**: RESTful API with the following key endpoints:
- `POST /api/reports/upload` - Medical report upload with multipart/form-data
- `POST /api/assessments` - Submit symptom assessment answers
- `GET /api/risk-score` - Retrieve latest risk score
- `GET /api/tasks` - Fetch daily wellness tasks
- `PATCH /api/tasks/:id` - Update task completion status
- `GET /api/insights` - Retrieve AI-generated health insights
- `GET /api/parameters/latest` - Get most recent medical parameters
- `GET /api/parameters/all` - Get all historical parameters for tracking
- `GET /api/reports` - List all uploaded reports

**File Storage**: Local file system storage in `uploads/` directory with Multer middleware handling multipart uploads (10MB limit, supports PDF, JPG, PNG)

**Development vs Production**:
- Development mode uses Vite dev server with HMR
- Production mode serves pre-built static assets from `dist/public/`
- Separate entry points: `server/index-dev.ts` and `server/index-prod.ts`

### Data Storage

**Database**: PostgreSQL accessed via Neon serverless driver

**ORM**: Drizzle ORM with the following schema:

**Core Tables**:
- `medical_reports` - Uploaded report metadata and extracted data (JSON)
- `assessments` - User symptom assessment responses (JSON answers)
- `risk_scores` - Calculated health risk scores with interpretation
- `daily_tasks` - AI-generated wellness tasks (water, exercise, medication, diet)
- `medical_parameters` - Extracted lab values (TSH, hormones, insulin, etc.)
- `insights` - AI-generated educational content and recommendations

**Relationships**:
- Reports can have multiple parameters, assessments, tasks, and insights
- Risk scores reference both reports and assessments
- All use UUID primary keys with foreign key constraints

**Migration Strategy**: Drizzle Kit manages schema migrations in `migrations/` directory

### AI Integration

**Service**: Google Gemini API (gemini-2.0-flash-exp model)

**Primary Functions**:

1. **Medical Report Analysis** (`analyzeMedicalReport`):
   - Extracts structured health parameters from PDF/image reports
   - Returns JSON with parameter name, value, unit, reference range, and status
   - Focuses on thyroid, PCOS/PCOD, metabolic, and vitamin markers
   - Provides report summary and classification

2. **Risk Score Calculation** (`calculateRiskScore`):
   - Combines extracted parameters with assessment answers
   - Generates numerical risk score (0-100) with risk level classification
   - Provides interpretation and recommendations

3. **Daily Task Generation** (`generateDailyTasks`):
   - Creates personalized wellness tasks (hydration, exercise, medication timing, diet)
   - Based on medical parameters and risk assessment

4. **Insight Generation** (`generateInsights`):
   - Produces educational content about health conditions
   - Explains lab results in accessible language
   - Offers lifestyle and treatment recommendations

**AI Configuration**: Uses JSON response format for structured output, enabling reliable data extraction and storage

### Authentication & Sessions

Currently not implemented - the application operates without user authentication. Future implementation would likely use session-based authentication with PostgreSQL session storage (connect-pg-simple is already included as a dependency).

### Error Handling

- Client-side toast notifications for user feedback
- Server-side error logging with timestamps
- File upload validation (type, size limits)
- API key validation for Gemini service
- Graceful degradation when AI service is unavailable

## External Dependencies

### Third-Party Services

**Google Gemini API**: 
- AI-powered medical report analysis and content generation
- Requires `GEMINI_API_KEY` environment variable
- Used for OCR, data extraction, risk assessment, and personalized recommendations

**Neon Database**:
- Serverless PostgreSQL hosting
- Requires `DATABASE_URL` environment variable
- WebSocket-based connection pooling

### Key Libraries

**Frontend**:
- React 18 with TypeScript
- Radix UI primitives (accessibility-focused components)
- Tailwind CSS (utility-first styling)
- TanStack Query (server state management)
- Recharts (data visualization)
- Wouter (lightweight routing)
- date-fns (date formatting)
- React Hook Form with Zod validation

**Backend**:
- Express.js (web framework)
- Multer (file upload handling)
- Drizzle ORM (type-safe database queries)
- WebSocket support for Neon connection

**Development Tools**:
- Vite (build tool and dev server)
- TypeScript compiler
- ESBuild (production bundling)
- Replit-specific plugins (error overlay, cartographer, dev banner)

### Font Resources

Google Fonts CDN serving Inter font family for typography consistency across the healthcare interface.